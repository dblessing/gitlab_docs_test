<h1 id="builds-api">Builds API</h1>

<p>This API used by runners to receive and update builds.</p>

<p><strong>Authentication is done by runner token</strong></p>

<h2 id="builds">Builds</h2>

<h3 id="runs-oldest-pending-build-by-runner">Runs oldest pending build by runner</h3>

<p>POST /ci/builds/register</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">token</code> (required) - The unique token of runner</li>
</ul>

<p>Returns:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">79</span><span class="p">,</span><span class="w">
  </span><span class="nt">"commands"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sha"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"project_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nt">"repo_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"git@demo.gitlab.com:gitlab/gitlab-shell.git"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"before_sha"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="update-details-of-an-existing-build">Update details of an existing build</h3>

<p>PUT /ci/builds/:id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">state</code> (optional) - The state of a build</li>
<li><code class="prettyprint">trace</code> (optional) - The trace of a build</li>
</ul>
