<h1 id="commits-api">Commits API</h1>

<p><strong>Authentication is done by GitLab CI project token</strong></p>

<h2 id="commits">Commits</h2>

<h3 id="retrieve-all-commits-per-project">Retrieve all commits per project</h3>

<p>Get list of commits per project</p>

<p>GET /ci/commits</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">project_id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">project_token</code> (requires) - Project token</li>
<li><code class="prettyprint">page</code> (optional)</li>
<li><code class="prettyprint">per_page</code> (optional) - items per request (default is 20)</li>
</ul>

<p>Returns:</p>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65617dfc36761baa1f46a7006f2a88916f7f56cf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"before_sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96906f2bceb04c7323f8514aa5ad8cb1313e2898"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:35.247Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"finished_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.254Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.062692165374756</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_commit_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wow\n"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"builds"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.254Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:35.259Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.255Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65617dfc36761baa1f46a7006f2a88916f7f56cf"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:39.192Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"before_sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96906f2bceb04c7323f8514aa5ad8cb1313e2898"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"runner_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"commit_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<h3 id="create-commit">Create commit</h3>

<p>Inform GitLab CI about new commit you want it to build.</p>

<p><strong>If commit already exists in GitLab CI it will not be created</strong></p>

<p>POST /ci/commits</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">project_id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">project_token</code> (requires) - Project token</li>
<li><code class="prettyprint">data</code> (required) -  Push data. For example see comment in <code class="prettyprint">lib/api/commits.rb</code></li>
</ul>

<p>Returns:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65617dfc36761baa1f46a7006f2a88916f7f56cf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"before_sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96906f2bceb04c7323f8514aa5ad8cb1313e2898"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:35.247Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"finished_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.254Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.062692165374756</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_commit_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wow\n"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"git_author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"builds"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"finished_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.254Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:35.259Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:44.255Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65617dfc36761baa1f46a7006f2a88916f7f56cf"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-11-05T09:46:39.192Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"before_sha"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96906f2bceb04c7323f8514aa5ad8cb1313e2898"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"runner_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"commit_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
