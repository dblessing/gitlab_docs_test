<h1 id="projects-api">Projects API</h1>

<p>This API is intended to aid in the setup and configuration of
projects on Gitlab CI. </p>

<p><strong>Authentication is done by GitLab user token &amp; GitLab url</strong></p>

<h2 id="projects">Projects</h2>

<h3 id="list-authorized-projects">List Authorized Projects</h3>

<p>Lists all projects that the authenticated user has access to.</p>
<pre class="highlight plaintext"><code>GET /ci/projects
</code></pre>

<p>Returns:</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">271</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlabhq"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"iPWx6WM4lhHNedGfBpPJNP"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"default_ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.gitlabhq.com/gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"path"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"always_build"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"polling_interval"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"public"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssh_url_to_repo"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"git@demo.gitlab.com:gitlab/gitlab-shell.git"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">272</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlab-ci"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"iPWx6WM4lhHNedGfBpPJNP"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"default_ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.gitlabhq.com/gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"path"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"always_build"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"polling_interval"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"public"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssh_url_to_repo"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"git@demo.gitlab.com:gitlab/gitlab-shell.git"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="list-owned-projects">List Owned Projects</h3>

<p>Lists all projects that the authenticated user owns.</p>
<pre class="highlight plaintext"><code>GET /ci/projects/owned
</code></pre>

<p>Returns:</p>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">272</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlab-ci"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1800</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"iPWx6WM4lhHNedGfBpPJNP"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"default_ref"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.gitlabhq.com/gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"path"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gitlab/gitlab-shell"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"always_build"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"polling_interval"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"public"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssh_url_to_repo"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"git@demo.gitlab.com:gitlab/gitlab-shell.git"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"gitlab_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="single-project">Single Project</h3>

<p>Returns information about a single project for which the user is
authorized.</p>

<p>GET /ci/projects/:id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of the Gitlab CI project</li>
</ul>

<h3 id="create-project">Create Project</h3>

<p>Creates a Gitlab CI project using Gitlab project details.</p>

<p>POST /ci/projects</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">name</code> (required) - The name of the project</li>
<li><code class="prettyprint">gitlab_id</code> (required) - The ID of the project on the Gitlab instance</li>
<li><code class="prettyprint">default_ref</code> (optional) - The branch to run on (default to <code class="prettyprint">master</code>)</li>
</ul>

<h3 id="update-project">Update Project</h3>

<p>Updates a Gitlab CI project using Gitlab project details that the
authenticated user has access to.</p>

<p>PUT /ci/projects/:id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">name</code> - The name of the project</li>
<li><code class="prettyprint">default_ref</code> - The branch to run on (default to <code class="prettyprint">master</code>)</li>
</ul>

<h3 id="remove-project">Remove Project</h3>

<p>Removes a Gitlab CI project that the authenticated user has access to.</p>

<p>DELETE /ci/projects/:id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of the Gitlab CI project</li>
</ul>

<h3 id="link-project-to-runner">Link Project to Runner</h3>

<p>Links a runner to a project so that it can make builds (only via
authorized user).</p>

<p>POST /ci/projects/:id/runners/:runner_id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of the Gitlab CI project</li>
<li><code class="prettyprint">runner_id</code> (required) - The ID of the Gitlab CI runner</li>
</ul>

<h3 id="remove-project-from-runner">Remove Project from Runner</h3>

<p>Removes a runner from a project so that it can not make builds (only
via authorized user).</p>

<p>DELETE /ci/projects/:id/runners/:runner_id</p>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of the Gitlab CI project</li>
<li><code class="prettyprint">runner_id</code> (required) - The ID of the Gitlab CI runner</li>
</ul>
