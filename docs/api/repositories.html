<h1 id="repositories">Repositories</h1>

<h2 id="list-project-repository-tags">List project repository tags</h2>

<p>Get a list of repository tags from a project, sorted by name in reverse alphabetical order.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/tags
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
</ul>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"commit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authored_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-05-28T04:42:42-07:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"committed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-05-28T04:42:42-07:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"committer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jack Smith"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"committer_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2695effb5807a22ff3d138d593fd856244e155e7"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial commit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"parents_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2a4b78934375d7f53875269ffd4f45fd83a84ebe"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h2 id="create-a-new-tag">Create a new tag</h2>

<p>Creates new tag in the repository that points to the supplied ref.</p>
<pre class="highlight plaintext"><code>POST /projects/:id/repository/tags
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">tag_name</code> (required) - The name of a tag</li>
<li><code class="prettyprint">ref</code> (required) - Create tag using commit SHA, another tag name, or branch name.</li>
<li><code class="prettyprint">message</code> (optional) - Creates annotated tag.</li>
</ul>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"commit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authored_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-05-28T04:42:42-07:00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"committed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-05-28T04:42:42-07:00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"committer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jack Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"committer_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2695effb5807a22ff3d138d593fd856244e155e7"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Initial commit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"parents_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"2a4b78934375d7f53875269ffd4f45fd83a84ebe"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The message will be <code class="prettyprint">nil</code> when creating a lightweight tag otherwise
it will contain the annotation.</p>

<p>It returns 200 if the operation succeed. In case of an error,
405 with an explaining error message is returned.</p>

<h2 id="list-repository-tree">List repository tree</h2>

<p>Get a list of repository files and directories in a project.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/tree
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">path</code> (optional) - The path inside repository. Used to get contend of subdirectories</li>
<li><code class="prettyprint">ref_name</code> (optional) - The name of a repository branch or tag or if not given the default branch</li>
</ul>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tree"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"040000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6229c43a7e16fcc7e95f923f8ddadb8281d9c6c6"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contexts"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tree"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"040000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faf1cdf33feadc7973118ca42d35f1e62977e91f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"controllers"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tree"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"040000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95633e8d258bf3dfba3a5268fb8440d263218d74"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rakefile"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blob"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100644"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35b2f05cbb4566b71b34554cf184a9d0bd9d46d6"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VERSION"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blob"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100644"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"803e4a4f3727286c3093c63870c2b6524d30ec4f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"config.ru"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blob"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100644"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dfd2d862237323aa599be31b473d70a8a817943b"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h2 id="raw-file-content">Raw file content</h2>

<p>Get the raw file contents for a file by commit SHA and path.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/blobs/:sha
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required) - The commit or branch name</li>
<li><code class="prettyprint">filepath</code> (required) - The path the file</li>
</ul>

<h2 id="raw-blob-content">Raw blob content</h2>

<p>Get the raw file contents for a blob by blob SHA.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/raw_blobs/:sha
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required) - The blob SHA</li>
</ul>

<h2 id="get-file-archive">Get file archive</h2>

<p>Get an archive of the repository</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/archive
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (optional) - The commit SHA to download defaults to the tip of the default branch</li>
</ul>

<h2 id="compare-branches-tags-or-commits">Compare branches, tags or commits</h2>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/compare
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">from</code> (required) - the commit SHA or branch name</li>
<li><code class="prettyprint">to</code> (required) - the commit SHA or branch name</li>
</ul>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/compare?from=master&amp;to=feature
</code></pre>

<p>Response:</p>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"commit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12d65c8dd2b2676fa3ac47d955accc085a37a9c1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"short_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12d65c8dd2b"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JS fix"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dmitriy Zaporozhets"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dmitriy.zaporozhets@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-02-27T10:27:00+02:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"commits"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12d65c8dd2b2676fa3ac47d955accc085a37a9c1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"short_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12d65c8dd2b"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JS fix"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dmitriy Zaporozhets"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dmitriy.zaporozhets@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-02-27T10:27:00+02:00"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"diffs"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"old_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"files/js/application.js"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"new_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"files/js/application.js"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"a_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"b_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100644"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"diff"</span><span class="p">:</span><span class="w"> </span><span class="s2">"--- a/files/js/application.js\n+++ b/files/js/application.js\n@@ -24,8 +24,10 @@\n //= require g.raphael-min\n //= require g.bar-min\n //= require branch-graph\n-//= require highlightjs.min\n-//= require ace/ace\n //= require_tree .\n //= require d3\n //= require underscore\n+\n+function fix() { \n+  alert(\"Fixed\")\n+}"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"new_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"renamed_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"deleted_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"compare_timeout"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"compare_same_ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="contributors">Contributors</h2>

<p>Get repository contributors list</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/contributors
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
</ul>

<p>Response:</p>
<pre class="highlight plaintext"><code>[{
  "name": "Dmitriy Zaporozhets",
  "email": "dmitriy.zaporozhets@gmail.com",
  "commits": 117,
  "additions": 2097,
  "deletions": 517
}, {
  "name": "Jacob Vosmaer",
  "email": "contact@jacobvosmaer.nl",
  "commits": 33,
  "additions": 338,
  "deletions": 244
}]
</code></pre>
