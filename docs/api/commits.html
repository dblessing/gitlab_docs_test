<h1 id="commits-api">Commits API</h1>

<h2 id="list-repository-commits">List repository commits</h2>

<p>Get a list of repository commits in a project.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/commits
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">ref_name</code> (optional) - The name of a repository branch or tag or if not given the default branch</li>
</ul>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed899a2f4b50b4370feeea94676502b42383c746"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"short_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed899a2f4b5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Replace sanitize with escape once"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dmitriy Zaporozhets"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dzaporozhets@sphereconsultinginc.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-09-20T11:50:22+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Replace sanitize with escape once"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6104942438c14ec7bd21c6cd5bd995272b3faff6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"short_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6104942438c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sanitize for network graph"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"randx"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dmitriy.zaporozhets@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-09-20T09:06:12+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sanitize for network graph"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h2 id="get-a-single-commit">Get a single commit</h2>

<p>Get a specific commit identified by the commit hash or name of a branch or tag.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/commits/:sha
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required) - The commit hash or name of a repository branch or tag</li>
</ul>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6104942438c14ec7bd21c6cd5bd995272b3faff6"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"short_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6104942438c"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sanitize for network graph"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"author_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"randx"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"author_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dmitriy.zaporozhets@gmail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-09-20T09:06:12+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sanitize for network graph"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"committed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-09-20T09:06:12+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"authored_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-09-20T09:06:12+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"parent_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"ae1d9fb46aa2b07ee9836d49862ec4e2c46fbbba"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="get-the-diff-of-a-commit">Get the diff of a commit</h2>

<p>Get the diff of a commit in a project.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/commits/:sha/diff
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required) - The name of a repository branch or tag or if not given the default branch</li>
</ul>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"diff"</span><span class="p">:</span><span class="w"> </span><span class="s2">"--- a/doc/update/5.4-to-6.0.md\n+++ b/doc/update/5.4-to-6.0.md\n@@ -71,6 +71,8 @@\n sudo -u git -H bundle exec rake migrate_keys RAILS_ENV=production\n sudo -u git -H bundle exec rake migrate_inline_notes RAILS_ENV=production\n \n+sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production\n+\n ```\n \n ### 6. Update config files"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"new_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doc/update/5.4-to-6.0.md"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"old_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doc/update/5.4-to-6.0.md"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"a_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"b_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100644"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"new_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"renamed_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"deleted_file"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h2 id="get-the-comments-of-a-commit">Get the comments of a commit</h2>

<p>Get the comments of a commit in a project.</p>
<pre class="highlight plaintext"><code>GET /projects/:id/repository/commits/:sha/comments
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required) - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required) - The name of a repository branch or tag or if not given the default branch</li>
</ul>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this code is really nice"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@local.host"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-03-06T08:17:35.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h2 id="post-comment-to-commit">Post comment to commit</h2>

<p>Adds a comment to a commit. Optionally you can post comments on a specific line of a commit. Therefor both <code class="prettyprint">path</code>, <code class="prettyprint">line_new</code> and <code class="prettyprint">line_old</code> are required.</p>
<pre class="highlight plaintext"><code>POST /projects/:id/repository/commits/:sha/comments
</code></pre>

<p>Parameters:</p>

<ul>
<li><code class="prettyprint">id</code> (required)               - The ID of a project</li>
<li><code class="prettyprint">sha</code> (required)              - The name of a repository branch or tag or if not given the default branch</li>
<li><code class="prettyprint">note</code> (required)             - Text of comment</li>
<li><code class="prettyprint">path</code> (optional)             - The file path</li>
<li><code class="prettyprint">line</code> (optional)             - The line number</li>
<li><code class="prettyprint">line_type</code> (optional)        - The line type (new or old)</li>
</ul>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@local.host"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"blocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-04-29T08:46:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.rb"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"line_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
